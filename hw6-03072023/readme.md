# Домашнее задание к лекции "Журналы"
## Дата: 03.07.2023
## Тема: Журналы
## Вычислительные ресурсы
Ноутбук Lenovo T14G1 (i5, 4 core, 32 Gb, 1 Tb), ОС W10Pro, WMware WksPro 17
ВМ (2 core, 4 Gb, 20 Gb), ОС AstraLinux 1.7.4 mode 0, ПО Тантор (СУБД 15)

## Описание/Пошаговая инструкция выполнения домашнего задания:

_Настройте выполнение контрольной точки раз в 30 секунд.
10 минут c помощью утилиты pgbench подавайте нагрузку.
Измерьте, какой объем журнальных файлов был сгенерирован за это время. Оцените, какой объем приходится в среднем на одну контрольную точку.
Проверьте данные статистики: все ли контрольные точки выполнялись точно по расписанию. Почему так произошло?
Сравните tps в синхронном/асинхронном режиме утилитой pgbench. Объясните полученный результат.
Создайте новый кластер с включенной контрольной суммой страниц. Создайте таблицу. Вставьте несколько значений. Выключите кластер. Измените пару байт в таблице. Включите кластер и сделайте выборку из таблицы. Что и почему произошло? как проигнорировать ошибку и продолжить работу?_

## Выполнение
_Настраиваем выполнение контрольной точки раз в 30 секунд. Добавляем информацию о выполняемых контрольных точках в журнал сообщений. Применяем конфигурацию._

## 1
```
postgres@alse174cmdt3:~$ psql
psql (15.2)
Введите "help", чтобы получить справку.

postgres=# ALTER SYSTEM SET checkpoint_timeout = 30;
ALTER SYSTEM
postgres=# ALTER SYSTEM SET log_checkpoints = on;
ALTER SYSTEM
postgres=# SELECT pg_reload_conf();
 pg_reload_conf
----------------
 t
(1 строка)

postgres=# \q
postgres@alse174cmdt3:~$
```

_Готовим pg_bench и запускаем тест на 10 мин._

## 1
```
postgres@alse174cmdt3:~$ pgbench -i postgres
dropping old tables...
ЗАМЕЧАНИЕ:  таблица "pgbench_accounts" не существует, пропускается
ЗАМЕЧАНИЕ:  таблица "pgbench_branches" не существует, пропускается
ЗАМЕЧАНИЕ:  таблица "pgbench_history" не существует, пропускается
ЗАМЕЧАНИЕ:  таблица "pgbench_tellers" не существует, пропускается
creating tables...
generating data (client-side)...
100000 of 100000 tuples (100%) done (elapsed 0.29 s, remaining 0.00 s)
vacuuming...
creating primary keys...
done in 0.70 s (drop tables 0.00 s, create tables 0.02 s, client-side generate 0.36 s, vacuum 0.14 s, primary keys 0.18 s).
postgres@alse174cmdt3:~$ pgbench -P 30 -T 600
pgbench (15.2)
starting vacuum...end.
progress: 30.0 s, 948.9 tps, lat 1.053 ms stddev 0.759, 0 failed
progress: 60.0 s, 1115.2 tps, lat 0.896 ms stddev 0.440, 0 failed
progress: 90.0 s, 969.6 tps, lat 1.031 ms stddev 0.345, 0 failed
progress: 120.0 s, 1069.4 tps, lat 0.935 ms stddev 0.617, 0 failed
progress: 150.0 s, 906.9 tps, lat 1.102 ms stddev 0.292, 0 failed
progress: 180.0 s, 834.3 tps, lat 1.198 ms stddev 0.211, 0 failed
progress: 210.0 s, 927.2 tps, lat 1.078 ms stddev 0.267, 0 failed
progress: 240.0 s, 1117.9 tps, lat 0.894 ms stddev 0.339, 0 failed
progress: 270.0 s, 1037.5 tps, lat 0.963 ms stddev 0.318, 0 failed
progress: 300.0 s, 1108.2 tps, lat 0.902 ms stddev 0.325, 0 failed
progress: 330.0 s, 864.3 tps, lat 1.156 ms stddev 0.206, 0 failed
progress: 360.0 s, 985.7 tps, lat 1.014 ms stddev 0.293, 0 failed
progress: 390.0 s, 962.7 tps, lat 1.038 ms stddev 0.275, 0 failed
progress: 420.0 s, 860.2 tps, lat 1.162 ms stddev 0.187, 0 failed
progress: 450.0 s, 903.8 tps, lat 1.106 ms stddev 0.243, 0 failed
progress: 480.0 s, 839.5 tps, lat 1.191 ms stddev 0.141, 0 failed
progress: 510.0 s, 997.6 tps, lat 1.002 ms stddev 0.312, 0 failed
progress: 540.0 s, 1175.7 tps, lat 0.850 ms stddev 0.296, 0 failed
progress: 570.0 s, 1028.6 tps, lat 0.972 ms stddev 0.318, 0 failed
progress: 600.0 s, 894.6 tps, lat 1.117 ms stddev 0.235, 0 failed
transaction type: <builtin: TPC-B (sort of)>
scaling factor: 1
query mode: simple
number of clients: 1
number of threads: 1
maximum number of tries: 1
duration: 600 s
number of transactions actually processed: 586435
number of failed transactions: 0 (0.000%)
latency average = 1.023 ms
latency stddev = 0.370 ms
initial connection time = 10.953 ms
tps = 977.408911 (without initial connection time)
postgres@alse174cmdt3:~$
```

_Смотрим журнал._

## 1
```
postgres@alse174cmdt3:~$ tail /var/lib/postgresql/tantor-se-15/data/log/postgresql-2023-07-08_212730.log
2023-07-08 21:37:17.034 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 21:37:44.048 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 2177 (13.3%); добавлено файлов WAL 0, удалено: 0, переработано: 2; запись=26.991 сек., синхр.=0.013 сек., всего=27.014 сек.; синхронизировано_файлов=12, самая_долгая_синхр.=0.012 сек., средняя=0.002 сек.; расстояние=26835 kB, ожидалось=29271 kB
2023-07-08 21:37:47.051 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 21:38:14.065 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 2035 (12.4%); добавлено файлов WAL 0, удалено: 0, переработано: 2; запись=26.988 сек., синхр.=0.003 сек., всего=27.015 сек.; синхронизировано_файлов=7, самая_долгая_синхр.=0.003 сек., средняя=0.001 сек.; расстояние=28310 kB, ожидалось=29175 kB
2023-07-08 21:38:17.066 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 21:38:44.080 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 2536 (15.5%); добавлено файлов WAL 0, удалено: 0, переработано: 1; запись=26.998 сек., синхр.=0.013 сек., всего=27.014 сек.; синхронизировано_файлов=13, самая_долгая_синхр.=0.011 сек., средняя=0.001 сек.; расстояние=27484 kB, ожидалось=29006 kB
2023-07-08 21:38:47.082 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 21:39:14.035 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 1994 (12.2%); добавлено файлов WAL 0, удалено: 0, переработано: 2; запись=26.927 сек., синхр.=0.016 сек., всего=26.953 сек.; синхронизировано_файлов=7, самая_долгая_синхр.=0.011 сек., средняя=0.003 сек.; расстояние=27588 kB, ожидалось=28864 kB
2023-07-08 21:40:17.099 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 21:40:44.021 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 2130 (13.0%); добавлено файлов WAL 0, удалено: 0, переработано: 1; запись=26.907 сек., синхр.=0.003 сек., всего=26.922 сек.; синхронизировано_файлов=14, самая_долгая_синхр.=0.002 сек., средняя=0.001 сек.; расстояние=23148 kB, ожидалось=28292 kB
```
_В журнале мы видим инофпмацию о количестве записанных буферов, изменения состава WAL после контрольной точки, затраченное на выполнение контрольной точки время, диапазон (в байтах) между контрольными точками. На контрольную точку приходится примерно 2100 буферов. Контрольные точки выполнялись по расписанию (checkpoint_completion_target = 0.9 для postgresql 15). Время по журналу 27 сек. Выведем статистику из pg_stat_bgwriter._

## 1
```
postgres=# show checkpoint_completion_target;
 checkpoint_completion_target
------------------------------
 0.9
(1 строка)

postgres=# SELECT * FROM pg_stat_bgwriter \gx
-[ RECORD 1 ]---------+------------------------------
checkpoints_timed     | 22
checkpoints_req       | 0
checkpoint_write_time | 539521
checkpoint_sync_time  | 175
buffers_checkpoint    | 42873
buffers_clean         | 0
maxwritten_clean      | 0
buffers_backend       | 5545
buffers_backend_fsync | 0
buffers_alloc         | 6495
stats_reset           | 2023-07-05 21:53:13.038412+03

postgres=# \q
postgres@alse174cmdt3:~$
```

Контрольных точек 22 (checkpoints_timed). В файле 22. Определяем lsn для таблиц и их принадлежность к файлам._

## 1
```
postgres@alse174cmdt3:~$ psql
psql (15.2)
Введите "help", чтобы получить справку.

postgres=# \dt
                Список отношений
 Схема  |       Имя        |   Тип   | Владелец
--------+------------------+---------+----------
 public | pgbench_accounts | таблица | postgres
 public | pgbench_branches | таблица | postgres
 public | pgbench_history  | таблица | postgres
 public | pgbench_tellers  | таблица | postgres
(4 строки)

postgres=# CREATE EXTENSION pageinspect;
CREATE EXTENSION
postgres=# SELECT lsn FROM page_header(get_raw_page('pgbench_accounts',0));
    lsn
------------
 0/23B2FEB8
(1 строка)

postgres=# SELECT lsn FROM page_header(get_raw_page('pgbench_branches',0));
    lsn
------------
 0/23CEBEB0
(1 строка)

postgres=# SELECT pg_walfile_name('0/23B2FEB8');
     pg_walfile_name
--------------------------
 000000010000000000000023
(1 строка)

postgres=# SELECT pg_walfile_name('0/23CEBEB0');
     pg_walfile_name
--------------------------
 000000010000000000000023
(1 строка)

postgres=#
```

_Два файла WAL. Включаем асинхронный режим._

## 1
```
postgres=# ALTER SYSTEM SET synchronous_commit = off;
ALTER SYSTEM
postgres=# SELECT pg_reload_conf();
 pg_reload_conf
----------------
 t
(1 строка)

postgres=# \q
postgres@alse174cmdt3:~$postgres=# \q
postgres@alse174cmdt3:~$
```

_Запускаем тест._

## 1
```
postgres@alse174cmdt3:~$ pgbench -P 30 -T 600
pgbench (15.2)
starting vacuum...end.
progress: 30.0 s, 792.2 tps, lat 1.261 ms stddev 0.761, 0 failed
progress: 60.0 s, 777.7 tps, lat 1.285 ms stddev 0.760, 0 failed
progress: 90.0 s, 827.1 tps, lat 1.208 ms stddev 0.774, 0 failed
progress: 120.0 s, 956.8 tps, lat 1.044 ms stddev 0.738, 0 failed
progress: 150.0 s, 745.7 tps, lat 1.340 ms stddev 0.723, 0 failed
progress: 180.0 s, 971.2 tps, lat 1.029 ms stddev 0.727, 0 failed
progress: 210.0 s, 1286.7 tps, lat 0.777 ms stddev 0.618, 0 failed
progress: 240.0 s, 728.4 tps, lat 1.372 ms stddev 0.717, 0 failed
progress: 270.0 s, 900.0 tps, lat 1.111 ms stddev 0.645, 0 failed
progress: 300.0 s, 1060.3 tps, lat 0.943 ms stddev 0.695, 0 failed
progress: 330.0 s, 867.6 tps, lat 1.152 ms stddev 0.732, 0 failed
progress: 360.0 s, 861.2 tps, lat 1.160 ms stddev 0.732, 0 failed
progress: 390.0 s, 1056.7 tps, lat 0.946 ms stddev 0.691, 0 failed
progress: 420.0 s, 1180.4 tps, lat 0.847 ms stddev 0.652, 0 failed
progress: 450.0 s, 920.8 tps, lat 1.085 ms stddev 0.668, 0 failed
progress: 480.0 s, 1139.3 tps, lat 0.877 ms stddev 0.612, 0 failed
progress: 510.0 s, 749.6 tps, lat 1.334 ms stddev 0.653, 0 failed
progress: 540.0 s, 951.9 tps, lat 1.050 ms stddev 0.697, 0 failed
progress: 570.0 s, 1018.6 tps, lat 0.981 ms stddev 0.668, 0 failed
progress: 600.0 s, 783.9 tps, lat 1.275 ms stddev 0.657, 0 failed
transaction type: <builtin: TPC-B (sort of)>
scaling factor: 1
query mode: simple
number of clients: 1
number of threads: 1
maximum number of tries: 1
duration: 600 s
number of transactions actually processed: 557285
number of failed transactions: 0 (0.000%)
latency average = 1.076 ms
latency stddev = 0.714 ms
initial connection time = 11.316 ms
tps = 928.823102 (without initial connection time)
postgres@alse174cmdt3:~$
```

_Полученные данные практически не отличаются так как кластер работает на ssd диске. Данные из журнала._

## 1
```
2023-07-08 22:31:49.043 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 22:32:16.108 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 1937 (11.8%); добавлено файлов WAL 0, удалено: 0, переработано: 2; запись=27.036 сек., синхр.=0.012 сек., всего=27.065 сек.; синхронизировано_файлов=7, самая_долгая_синхр.=0.010 сек., средняя=0.002 сек.; расстояние=27750 kB, ожидалось=28736 kB
2023-07-08 22:32:19.111 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 22:32:46.085 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 2584 (15.8%); добавлено файлов WAL 0, удалено: 0, переработано: 2; запись=26.948 сек., синхр.=0.011 сек., всего=26.975 сек.; синхронизировано_файлов=15, самая_долгая_синхр.=0.010 сек., средняя=0.001 сек.; расстояние=27898 kB, ожидалось=28652 kB
2023-07-08 22:32:49.086 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 22:33:16.042 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 1929 (11.8%); добавлено файлов WAL 0, удалено: 0, переработано: 1; запись=26.929 сек., синхр.=0.013 сек., всего=26.956 сек.; синхронизировано_файлов=8, самая_долгая_синхр.=0.011 сек., средняя=0.002 сек.; расстояние=26842 kB, ожидалось=28471 kB
2023-07-08 22:33:19.043 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 22:33:46.031 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 2144 (13.1%); добавлено файлов WAL 0, удалено: 0, переработано: 2; запись=26.959 сек., синхр.=0.011 сек., всего=26.989 сек.; синхронизировано_файлов=14, самая_долгая_синхр.=0.010 сек., средняя=0.001 сек.; расстояние=25562 kB, ожидалось=28180 kB
2023-07-08 22:33:49.034 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 22:34:16.096 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 1935 (11.8%); добавлено файлов WAL 0, удалено: 0, переработано: 2; запись=27.035 сек., синхр.=0.011 сек., всего=27.062 сек.; синхронизировано_файлов=7, самая_долгая_синхр.=0.010 сек., средняя=0.002 сек.; расстояние=27626 kB, ожидалось=28124 kB
2023-07-08 22:34:19.098 MSK [954] СООБЩЕНИЕ:  начата контрольная точка: time
2023-07-08 22:34:46.084 MSK [954] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 2506 (15.3%); добавлено файлов WAL 0, удалено: 0, переработано: 1; запись=26.964 сек., синхр.=0.003 сек., всего=26.986 сек.; синхронизировано_файлов=16, самая_долгая_синхр.=0.002 сек., средняя=0.001 сек.; расстояние=25371 kB, ожидалось=27849 kB
```
_Создаем новый кластер. Включаем проверку контрольных сумм. Создаем таблицу. Наполняем данными. Останавливаем СУБД._

## 1
```
postgres@alse174cmdt3:~$ rm -r /var/lib/postgresql/tantor-se-15/data
postgres@alse174cmdt3:~$ initdb -D /var/lib/postgresql/tantor-se-15/data --no-instructions 2> /dev/null
Файлы, относящиеся к этой СУБД, будут принадлежать пользователю "postgres".
От его имени также будет запускаться процесс сервера.

Кластер баз данных будет инициализирован с локалью "ru_RU.UTF-8".
Кодировка БД по умолчанию, выбранная в соответствии с настройками: "UTF8".
Выбрана конфигурация текстового поиска по умолчанию "russian".

Контроль целостности страниц данных отключён.

создание каталога /var/lib/postgresql/tantor-se-15/data... ок
создание подкаталогов... ок
выбирается реализация динамической разделяемой памяти... posix
выбирается значение max_connections по умолчанию... 100
выбирается значение shared_buffers по умолчанию... 128MB
выбирается часовой пояс по умолчанию... Europe/Moscow
создание конфигурационных файлов... ок
выполняется подготовительный скрипт... ок
выполняется заключительная инициализация... ок
сохранение данных на диске... ок

postgres@alse174cmdt3:~$ pg_checksums --enable -D /var/lib/postgresql/tantor-se-15/data
Обработка контрольных сумм завершена
Просканировано файлов: 946
Просканировано блоков: 2802
Записано файлов: 778
Записано блоков: 2802
pg_checksums: синхронизация каталога данных
pg_checksums: модификация управляющего файла
Контрольные суммы в кластере включены
postgres@alse174cmdt3:~$ pg_ctl start
ожидание запуска сервера....2023-07-08 22:44:20.457 MSK [1605] СООБЩЕНИЕ:  запускается PostgreSQL 15.2 on x86_64-pc-linux-gnu, compiled by gcc (AstraLinuxSE 8.3.0-6) 8.3.0, 64-bit
2023-07-08 22:44:20.459 MSK [1605] СООБЩЕНИЕ:  для приёма подключений по адресу IPv4 "127.0.0.1" открыт порт 5432
2023-07-08 22:44:20.459 MSK [1605] СООБЩЕНИЕ:  для приёма подключений по адресу IPv6 "::1" открыт порт 5432
2023-07-08 22:44:20.461 MSK [1605] СООБЩЕНИЕ:  для приёма подключений открыт Unix-сокет "/var/run/postgresql/.s.PGSQL.5432"
2023-07-08 22:44:20.473 MSK [1608] СООБЩЕНИЕ:  система БД была выключена: 2023-07-08 22:43:25 MSK
2023-07-08 22:44:20.484 MSK [1605] СООБЩЕНИЕ:  система БД готова принимать подключения
 готово
сервер запущен
postgres@alse174cmdt3:~$ psql
psql (15.2)
Введите "help", чтобы получить справку.

postgres=# show data_checksums;
 data_checksums
----------------
 on
(1 строка)

postgres=# CREATE TABLE test (i int);
CREATE TABLE
postgres=# INSERT INTO test values(1);
INSERT 0 1
postgres=# INSERT INTO test values(2);
INSERT 0 1
postgres=# INSERT INTO test values(3);
INSERT 0 1
postgres=# SELECT i FROM test;
 i
---
 1
 2
 3
(3 строки)

postgres=# SELECT pg_relation_filepath('test');
 pg_relation_filepath
----------------------
 base/5/16388
(1 строка)

postgres=# \q
postgres@alse174cmdt3:~$ pg_ctl stop
2023-07-08 22:47:04.877 MSK [1605] СООБЩЕНИЕ:  получен запрос на быстрое выключение
ожидание завершения работы сервера....2023-07-08 22:47:04.888 MSK [1605] СООБЩЕНИЕ:  прерывание всех активных транзакций
2023-07-08 22:47:04.892 MSK [1605] СООБЩЕНИЕ:  фоновый процесс "logical replication launcher" (PID 1611) завершился с кодом выхода 1
2023-07-08 22:47:04.893 MSK [1606] СООБЩЕНИЕ:  выключение
2023-07-08 22:47:04.895 MSK [1606] СООБЩЕНИЕ:  начата контрольная точка: shutdown immediate
2023-07-08 22:47:04.903 MSK [1606] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 24 (0.1%); добавлено файлов WAL 0, удалено: 0, переработано: 0; запись=0.004 сек., синхр.=0.002 сек., всего=0.010 сек.; синхронизировано_файлов=20, самая_долгая_синхр.=0.001 сек., средняя=0.001 сек.; расстояние=85 kB, ожидалось=85 kB
2023-07-08 22:47:04.907 MSK [1605] СООБЩЕНИЕ:  система БД выключена
 готово
сервер остановлен
postgres@alse174cmdt3:~$
```

_Вносим изменения в файл._

## 1
```
root@alse174cmdt3:~# dd if=/dev/zero of=/var/lib/postgresql/tantor-se-15/data/base/5/16388 oflag=dsync conv=notrunc bs=1 count=8
8+0 записей получено
8+0 записей отправлено
8 байт скопировано, 0,00345408 s, 2,3 kB/s
root@alse174cmdt3:~#
```

_Запускаем СУБД. Выполнем выборку из таблицы. Получаем ошибку._

## 1
```
postgres@alse174cmdt3:~$ pg_ctl start
ожидание запуска сервера....2023-07-08 22:51:49.481 MSK [1640] СООБЩЕНИЕ:  запускается PostgreSQL 15.2 on x86_64-pc-linux-gnu, compiled by gcc (AstraLinuxSE 8.3.0-6) 8.3.0, 64-bit
2023-07-08 22:51:49.481 MSK [1640] СООБЩЕНИЕ:  для приёма подключений по адресу IPv4 "127.0.0.1" открыт порт 5432
2023-07-08 22:51:49.482 MSK [1640] СООБЩЕНИЕ:  для приёма подключений по адресу IPv6 "::1" открыт порт 5432
2023-07-08 22:51:49.483 MSK [1640] СООБЩЕНИЕ:  для приёма подключений открыт Unix-сокет "/var/run/postgresql/.s.PGSQL.5432"
2023-07-08 22:51:49.490 MSK [1643] СООБЩЕНИЕ:  система БД была выключена: 2023-07-08 22:47:04 MSK
2023-07-08 22:51:49.496 MSK [1640] СООБЩЕНИЕ:  система БД готова принимать подключения
 готово
сервер запущен
postgres@alse174cmdt3:~$ psql
psql (15.2)
Введите "help", чтобы получить справку.

postgres=# SELECT i FROM test;
2023-07-08 22:52:08.979 MSK [1648] ПРЕДУПРЕЖДЕНИЕ:  ошибка проверки страницы: получена контрольная сумма 36207, а ожидалась - 50686
ПРЕДУПРЕЖДЕНИЕ:  ошибка проверки страницы: получена контрольная сумма 36207, а ожидалась - 50686
2023-07-08 22:52:08.980 MSK [1648] ОШИБКА:  неверная страница в блоке 0 отношения base/5/16388
2023-07-08 22:52:08.980 MSK [1648] ОПЕРАТОР:  SELECT i FROM test;
ОШИБКА:  неверная страница в блоке 0 отношения base/5/16388
```

_Пытаемся прочитать данные с игнорированием контрольной суммы и возможными искажениями. Для исключения подобной ситуации необходимо регулярно выполнять резервное копирование._

## 1
```
postgres=# SET ignore_checksum_failure = on;
SET
```

_Повторяем выборку из таблицы и получаем данные с предупреждением._

## 1
```
postgres=# SELECT i FROM test;
2023-07-08 22:52:22.093 MSK [1648] ПРЕДУПРЕЖДЕНИЕ:  ошибка проверки страницы: получена контрольная сумма 36207, а ожидалась - 50686
ПРЕДУПРЕЖДЕНИЕ:  ошибка проверки страницы: получена контрольная сумма 36207, а ожидалась - 50686
 i
---
 1
 2
 3
(3 строки)

postgres=#
```